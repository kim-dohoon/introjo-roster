<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Config Migration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBUyDZ2MhXGPXtWqz5F7S0EY4nEjeA1Nys",
            authDomain: "introjo-roster.firebaseapp.com",
            projectId: "introjo-roster",
            storageBucket: "introjo-roster.firebasestorage.app",
            messagingSenderId: "441664828500",
            appId: "1:441664828500:web:566f8c6be0caab1e2469c1"
        };

        const appId = 'production-roster-2026';

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Data to migrate
        const HOLIDAYS_DATA = {
            '2025': {
                '2025-01-01': 'ì‹ ì •', '2025-01-28': 'ì„¤ë‚ ', '2025-01-29': 'ì„¤ë‚ ', '2025-01-30': 'ì„¤ë‚ ', '2025-03-01': 'ì‚¼ì¼ì ˆ', '2025-03-03': 'ëŒ€ì²´ê³µíœ´ì¼',
                '2025-05-05': 'ì–´ë¦°ì´ë‚ ', '2025-05-06': 'ëŒ€ì²´ê³µíœ´ì¼', '2025-06-06': 'í˜„ì¶©ì¼', '2025-08-15': 'ê´‘ë³µì ˆ', '2025-10-03': 'ê°œì²œì ˆ',
                '2025-10-05': 'ì¶”ì„', '2025-10-06': 'ì¶”ì„', '2025-10-07': 'ì¶”ì„', '2025-10-08': 'ëŒ€ì²´ê³µíœ´ì¼', '2025-10-09': 'í•œê¸€ë‚ ', '2025-12-25': 'ì„±íƒ„ì ˆ'
            },
            '2026': {
                '2026-01-01': 'ì‹ ì •', '2026-02-16': 'ì„¤ë‚ ', '2026-02-17': 'ì„¤ë‚ ', '2026-02-18': 'ì„¤ë‚ ', '2026-03-01': 'ì‚¼ì¼ì ˆ', '2026-03-02': 'ëŒ€ì²´ê³µíœ´ì¼',
                '2026-05-05': 'ì–´ë¦°ì´ë‚ ', '2026-05-24': 'ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ', '2026-05-25': 'ëŒ€ì²´ê³µíœ´ì¼', '2026-06-06': 'í˜„ì¶©ì¼', '2026-08-15': 'ê´‘ë³µì ˆ', '2026-08-17': 'ëŒ€ì²´ê³µíœ´ì¼',
                '2026-09-24': 'ì¶”ì„', '2026-09-25': 'ì¶”ì„', '2026-09-26': 'ì¶”ì„', '2026-10-03': 'ê°œì²œì ˆ', '2026-10-05': 'ëŒ€ì²´ê³µíœ´ì¼', '2026-10-09': 'í•œê¸€ë‚ ',
                '2026-12-25': 'ì„±íƒ„ì ˆ'
            },
            '2027': {
                '2027-01-01': 'ì‹ ì •', '2027-02-06': 'ì„¤ë‚ ', '2027-02-07': 'ì„¤ë‚ ', '2027-02-08': 'ì„¤ë‚ ', '2027-02-09': 'ëŒ€ì²´ê³µíœ´ì¼', '2027-03-01': 'ì‚¼ì¼ì ˆ',
                '2027-05-05': 'ì–´ë¦°ì´ë‚ ', '2027-05-13': 'ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ', '2027-06-06': 'í˜„ì¶©ì¼', '2027-08-15': 'ê´‘ë³µì ˆ', '2027-08-16': 'ëŒ€ì²´ê³µíœ´ì¼',
                '2027-09-14': 'ì¶”ì„', '2027-09-15': 'ì¶”ì„', '2027-09-16': 'ì¶”ì„', '2027-10-03': 'ê°œì²œì ˆ', '2027-10-04': 'ëŒ€ì²´ê³µíœ´ì¼', '2027-10-09': 'í•œê¸€ë‚ ', '2027-10-11': 'ëŒ€ì²´ê³µíœ´ì¼', '2027-12-25': 'ì„±íƒ„ì ˆ', '2027-12-27': 'ëŒ€ì²´ê³µíœ´ì¼'
            },
            '2028': {
                '2028-01-01': 'ì‹ ì •', '2028-01-26': 'ì„¤ë‚ ', '2028-01-27': 'ì„¤ë‚ ', '2028-01-28': 'ì„¤ë‚ ', '2028-03-01': 'ì‚¼ì¼ì ˆ', '2028-05-02': 'ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ', '2028-05-05': 'ì–´ë¦°ì´ë‚ ',
                '2028-06-06': 'í˜„ì¶©ì¼', '2028-08-15': 'ê´‘ë³µì ˆ', '2028-10-02': 'ì¶”ì„', '2028-10-03': 'ì¶”ì„', '2028-10-04': 'ì¶”ì„', '2028-10-05': 'ëŒ€ì²´ê³µíœ´ì¼', '2028-10-09': 'í•œê¸€ë‚ ', '2028-12-25': 'ì„±íƒ„ì ˆ'
            },
            '2029': {
                '2029-01-01': 'ì‹ ì •', '2029-02-12': 'ì„¤ë‚ ', '2029-02-13': 'ì„¤ë‚ ', '2029-02-14': 'ì„¤ë‚ ', '2029-03-01': 'ì‚¼ì¼ì ˆ', '2029-05-05': 'ì–´ë¦°ì´ë‚ ', '2029-05-07': 'ëŒ€ì²´ê³µíœ´ì¼',
                '2029-05-20': 'ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ', '2029-05-21': 'ëŒ€ì²´ê³µíœ´ì¼', '2029-06-06': 'í˜„ì¶©ì¼', '2029-08-15': 'ê´‘ë³µì ˆ', '2029-09-21': 'ì¶”ì„', '2029-09-22': 'ì¶”ì„', '2029-09-23': 'ì¶”ì„', '2029-09-24': 'ëŒ€ì²´ê³µíœ´ì¼',
                '2029-10-03': 'ê°œì²œì ˆ', '2029-10-09': 'í•œê¸€ë‚ ', '2029-12-25': 'ì„±íƒ„ì ˆ'
            },
            '2030': {
                '2030-01-01': 'ì‹ ì •', '2030-02-02': 'ì„¤ë‚ ', '2030-02-03': 'ì„¤ë‚ ', '2030-02-04': 'ì„¤ë‚ ', '2030-02-05': 'ëŒ€ì²´ê³µíœ´ì¼', '2030-03-01': 'ì‚¼ì¼ì ˆ', '2030-05-05': 'ì–´ë¦°ì´ë‚ ', '2030-05-06': 'ëŒ€ì²´ê³µíœ´ì¼',
                '2030-05-09': 'ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ', '2030-06-06': 'í˜„ì¶©ì¼', '2030-08-15': 'ê´‘ë³µì ˆ', '2030-09-11': 'ì¶”ì„', '2030-09-12': 'ì¶”ì„', '2030-09-13': 'ì¶”ì„', '2030-10-03': 'ê°œì²œì ˆ', '2030-10-09': 'í•œê¸€ë‚ ', '2030-12-25': 'ì„±íƒ„ì ˆ'
            }
        };

        const TEAM_MEMBERS_DATA = {
            'A': ['ë°•ì˜ë‚¨', 'í™ì„±ë¯¼', 'ê¹€ì •êµ­', 'ê¹€ë„í›ˆ2', 'ì´ë¯¼ì •', 'ì¡°ëª…ì£¼', ''],
            'B': ['ì˜¤ì˜ì„', 'ì´ë™ì›…', 'ê¹€ìœ¤ìˆ˜', 'ì£¼ì •í˜¸', 'ë°•ì†Œí¬', 'ì¡°ë¯¸í˜•', 'ì†¡ë³´ë€'],
            'C': ['ì •ì¸ì² ', 'ê¹€ë„ì˜', 'ì´ì€í˜', 'ìµœìš©', 'ì „ìˆ˜ì§„', 'ê¹€ì§€í˜œ2', ''],
            'DAY_ONLY': ['ì‹ í™”ë™', 'ì„í˜„ê·œ', 'ê¹€ë¯¼ì†”', '']
        };

        const SHIFT_TYPES_DATA = {
            DAY: { label: 'ì£¼ê°„', color: 'bg-amber-50 text-amber-700', border: 'border-amber-200', badge: 'bg-amber-100 text-amber-800 ring-1 ring-amber-200' },
            NIGHT: { label: 'ì•¼ê°„', color: 'bg-indigo-50 text-indigo-700', border: 'border-indigo-200', badge: 'bg-indigo-100 text-indigo-800 ring-1 ring-indigo-200' },
            JU_HYU: { label: 'ë¬´íœ´', color: 'bg-slate-50 text-slate-500', border: 'border-slate-200', badge: 'bg-slate-100 text-slate-600 ring-1 ring-slate-200' },
            MU_HYU: { label: 'ì£¼íœ´', color: 'bg-emerald-50 text-emerald-700', border: 'border-emerald-200', badge: 'bg-emerald-100 text-emerald-800 ring-1 ring-emerald-200' },
            YU_HYU: { label: 'ìœ íœ´', color: 'bg-red-50 text-red-700', border: 'border-red-200', badge: 'bg-red-100 text-red-800 ring-1 ring-red-200' }
        };

        const ATTENDANCE_OPTIONS_DATA = {
            options: [
                { value: '', label: 'ì •ìƒ', color: 'text-slate-500' },
                { value: 'ì—°ì°¨', label: 'ì—°ì°¨', color: 'text-red-500 font-bold' },
                { value: 'ë°˜ì°¨', label: 'ë°˜ì°¨', color: 'text-blue-500 font-bold' },
                { value: 'ì¡°í‡´', label: 'ì¡°í‡´', color: 'text-yellow-600 font-bold' },
                { value: 'ì§€ê°', label: 'ì§€ê°', color: 'text-purple-500 font-bold' },
                { value: 'êµìœ¡', label: 'êµìœ¡', color: 'text-green-600 font-bold' },
                { value: 'í›ˆë ¨', label: 'í›ˆë ¨', color: 'text-indigo-600 font-bold' },
                { value: 'íŠ¹ê·¼', label: 'íŠ¹ê·¼', color: 'text-pink-600 font-bold' },
                { value: 'ê¸°íƒ€', label: 'ê¸°íƒ€', color: 'text-gray-600 font-bold' }
            ]
        };

        const SYSTEM_SETTINGS_DATA = {
            baseDate: '2026-01-01',
            shiftWorkHours: 10.25,
            dayWorkHours: 8.0,
            version: '1.0.0',
            lastUpdated: new Date().toISOString()
        };

        function log(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `p-2 mb-1 rounded text-sm ${type === 'success' ? 'bg-green-50 text-green-700 border border-green-200' :
                type === 'error' ? 'bg-red-50 text-red-700 border border-red-200' :
                    'bg-blue-50 text-blue-700 border border-blue-200'
                }`;
            logEntry.innerHTML = `<span class="font-mono text-xs">${new Date().toLocaleTimeString()}</span> ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        async function migrateConfig() {
            const btn = document.getElementById('migrateBtn');
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            try {
                log('ğŸ” Firebase ì¸ì¦ ì‹œì‘...');
                await signInAnonymously(auth);
                log('âœ… ì¸ì¦ ì™„ë£Œ', 'success');

                // Migrate holidays
                log('ğŸ“… ê³µíœ´ì¼ ë°ì´í„° ì—…ë¡œë“œ ì¤‘...');
                await setDoc(doc(db, 'artifacts', appId, 'public', 'config', 'holidays'), HOLIDAYS_DATA);
                log('âœ… ê³µíœ´ì¼ ë°ì´í„° ì—…ë¡œë“œ ì™„ë£Œ', 'success');

                // Migrate team members
                log('ğŸ‘¥ íŒ€ êµ¬ì„±ì› ë°ì´í„° ì—…ë¡œë“œ ì¤‘...');
                await setDoc(doc(db, 'artifacts', appId, 'public', 'config', 'teamMembers'), TEAM_MEMBERS_DATA);
                log('âœ… íŒ€ êµ¬ì„±ì› ë°ì´í„° ì—…ë¡œë“œ ì™„ë£Œ', 'success');

                // Migrate shift types
                log('â° ê·¼ë¬´ ìœ í˜• ë°ì´í„° ì—…ë¡œë“œ ì¤‘...');
                await setDoc(doc(db, 'artifacts', appId, 'public', 'config', 'shiftTypes'), SHIFT_TYPES_DATA);
                log('âœ… ê·¼ë¬´ ìœ í˜• ë°ì´í„° ì—…ë¡œë“œ ì™„ë£Œ', 'success');

                // Migrate attendance options
                log('ğŸ“ ì¶œê·¼ ìœ í˜• ì˜µì…˜ ì—…ë¡œë“œ ì¤‘...');
                await setDoc(doc(db, 'artifacts', appId, 'public', 'config', 'attendanceOptions'), ATTENDANCE_OPTIONS_DATA);
                log('âœ… ì¶œê·¼ ìœ í˜• ì˜µì…˜ ì—…ë¡œë“œ ì™„ë£Œ', 'success');

                // Migrate system settings
                log('âš™ï¸ ì‹œìŠ¤í…œ ì„¤ì • ì—…ë¡œë“œ ì¤‘...');
                await setDoc(doc(db, 'artifacts', appId, 'public', 'config', 'systemSettings'), SYSTEM_SETTINGS_DATA);
                log('âœ… ì‹œìŠ¤í…œ ì„¤ì • ì—…ë¡œë“œ ì™„ë£Œ', 'success');

                log('ğŸ‰ ëª¨ë“  ì„¤ì • ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ!', 'success');
                log('âš ï¸  ì´ íŒŒì¼ì€ ì´ì œ ì‚­ì œí•˜ì…”ë„ ë©ë‹ˆë‹¤.', 'info');

                document.getElementById('completionMessage').classList.remove('hidden');

            } catch (error) {
                log(`âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`, 'error');
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        window.migrateConfig = migrateConfig;
    </script>

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4">
    <div class="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Firebase Config Migration</h1>
            <p class="text-gray-600">ê¸°ì¡´ í•˜ë“œì½”ë”©ëœ ì„¤ì • ë°ì´í„°ë¥¼ Firebaseë¡œ ì´ë™í•©ë‹ˆë‹¤</p>
        </div>

        <div class="bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-amber-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-amber-700">
                        <strong>ì£¼ì˜:</strong> ì´ ì‘ì—…ì€ í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤. ì™„ë£Œ í›„ ì´ íŒŒì¼ì€ ì‚­ì œí•˜ì…”ë„ ë©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </div>

        <div class="mb-6">
            <h2 class="text-lg font-semibold text-gray-700 mb-3">ë§ˆì´ê·¸ë ˆì´ì…˜ í•­ëª©:</h2>
            <ul class="space-y-2 text-sm text-gray-600">
                <li class="flex items-center">
                    <span
                        class="w-6 h-6 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-2 text-xs font-bold">1</span>
                    ê³µíœ´ì¼ ë°ì´í„° (2025-2030)
                </li>
                <li class="flex items-center">
                    <span
                        class="w-6 h-6 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-2 text-xs font-bold">2</span>
                    íŒ€ êµ¬ì„±ì› (A, B, C, ì£¼ê°„ì¡°)
                </li>
                <li class="flex items-center">
                    <span
                        class="w-6 h-6 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-2 text-xs font-bold">3</span>
                    ê·¼ë¬´ ìœ í˜• ì •ì˜
                </li>
                <li class="flex items-center">
                    <span
                        class="w-6 h-6 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-2 text-xs font-bold">4</span>
                    ì¶œê·¼ ìœ í˜• ì˜µì…˜
                </li>
                <li class="flex items-center">
                    <span
                        class="w-6 h-6 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mr-2 text-xs font-bold">5</span>
                    ì‹œìŠ¤í…œ ì„¤ì •
                </li>
            </ul>
        </div>

        <button id="migrateBtn" onclick="migrateConfig()"
            class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 mb-6">
            ğŸš€ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘
        </button>

        <div id="completionMessage" class="hidden bg-green-50 border-l-4 border-green-500 p-4 mb-6 rounded">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-green-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-green-700">
                        <strong>ì™„ë£Œ!</strong> ì´ì œ index.htmlê³¼ manager.htmlì„ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-gray-50 rounded-lg p-4">
            <h3 class="text-sm font-semibold text-gray-700 mb-2">ì‹¤í–‰ ë¡œê·¸:</h3>
            <div id="logContainer" class="max-h-64 overflow-y-auto space-y-1 font-mono text-xs">
                <div class="text-gray-400 italic">ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
            </div>
        </div>
    </div>
</body>

</html>